<div class="flex flex-col gap-2">
  <label
    [class]="
      isInvalid
        ? 'text-sm font-medium text-red-600'
        : 'text-sm font-medium text-gray-700'
    "
  >
    {{ label() }}
    @if (isRequired) {
      <span class="text-red-500">*</span>
    }
  </label>

  <div class="relative">
    <!-- Icono izquierdo -->
    <div
      class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400"
    >
      <ng-content select="[leftIcon]"></ng-content>
    </div>

    <input
      [type]="show() ? 'text' : 'password'"
      [value]="value()"
      [disabled]="disabled()"
      autocomplete="new-password"
      name="password"
      (input)="handleInput($event)"
      (blur)="onTouched()"
      [class]="getInputClasses()"
      [placeholder]="placeholder()"
      [style.transform]="'translateZ(0)'"
    />

    <!-- Botón toggle derecho -->
    <div class="absolute inset-y-0 right-0 pr-3 flex items-center">
      <button
        type="button"
        class="text-gray-400 hover:text-gray-600 transition-colors focus:outline-none"
        (click)="toggle()"
        [disabled]="disabled()"
        [attr.aria-label]="show() ? 'Ocultar contraseña' : 'Mostrar contraseña'"
      >
        @if (show()) {
          <!-- Icono cuando está visible (muestra EyeOff para "ocultar") -->
          <lucide-icon showIcon [img]="EyeOffIcon" [size]="20" />
        } @else {
          <!-- Icono cuando está oculto (muestra Eye para "ver") -->
          <lucide-icon hideIcon [img]="EyeIcon" [size]="20" />
        }
      </button>
    </div>
  </div>
</div>
